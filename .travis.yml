dist: trusty
language: python
python:
  - '3.6'

# Install tox and codecov
install:
  - pip install tox-travis
  - pip install codecov

# Use tox to run tests in the matrix of environments
script:
- tox -r

# Push the results back to codecov
after_success:
  - coverage xml && codecov -f coverage.xml --commit=$TRAVIS_COMMIT

# Deploy updates on master to pypi, which will only succeed if there's been a version bump
deploy:
  provider: pypi
  skip_cleanup: true
  skip_existing: true
  edge: true
  user: octue
  password:
    secure: "Uf3ADe1gJzq53o37a6n9UE4Jwvsc2U2PrN5MTWJX7YuyQP+0aOFKWzR4k4QJWS8TNc40HTy9arDZTEOuWXCi4tDUI363dZ2Qz2DwL+Ts/wQL4M6qd5h43U5+azs+ypdvxES1lRtslYznirfR49vBQn/EFXChN1v9pLZ5AuRdA68UGGyeyi1/TnoAIQbQl9FNgm1yfoZROozUkLMUoQJGcj7kVGrAJKUHeeCol9e9FKB+GDAuqJHalRS/j7xQgNfikseGLXIa0yxXgraOV5cgyEHHwEITkTpUIcGXRcPt8VGYJ4dxoME5c9RBZreyGGbsoDZkClwSiObB+z+O1qZgvY86wYW47fZcr9cr/zdpXK4GSfZncYPvTj6+VZVx3qBGqtKMx6NQP7sHD0e2i34pLJ9Q/EQjwrBMxSFgSC+SbDGoJ63uRhNshxaTrK8sDd2z6IDbA2ydL3MWPnXZnT1+cPLEEFNpmKBQ1gZ4+aAzs+4ITSLzH6JDVthfzjBaw2HnEBm/FtuY8q7CwNZ7xca4MYux8BJRPmRA92HI60N0e7lbHG/rLfsighamXaNxQcJfDWD6u8ztnPoYM9+ikEZAyQfzj7g/pzgV0vlVRHQXAXA0S/to9TDYSv9e4Xd082SICPr2fh1mtQ+5t8FPJYGAGNsSuE5evBViDVkOxkFbrwE="
  on:
    branch: master
